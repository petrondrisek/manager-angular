<section class="users">
    <div class="missions__action-panel flex justify-end">
        <app-modal #modalAddRef type="extended-fab" buttonText="Add new user" buttonIcon="add">
            <app-user-add-form 
                (toggleModal)="modalAddRef.toggleModal($event)" 
                [users]="users">
            </app-user-add-form>
        </app-modal>
    </div>

    <table class="w-full border-2 border-gray-200 dark:border-gray-800 mt-2">
        <thead>
            <tr class="border-b-2 border-gray-200 dark:border-gray-800">
                <th class="text-left py-2 px-4">Username</th>
                <th class="text-left hidden md:table-cell py-2 px-4">First Name</th>
                <th class="text-left hidden md:table-cell py-2 px-4">Last Name</th>
                <th class="text-left py-2 px-4">Email</th>
                <th class="text-left py-2 px-4">Actions</th>
            </tr>
        </thead>
        <tbody>
            @for(user of users(); track user.id) {
                <tr>
                    <td class="text-left py-2 px-4">{{user.username}}</td>
                    <td class="text-left hidden md:table-cell py-2 px-4">{{user.firstName}}</td>
                    <td class="text-left hidden md:table-cell py-2 px-4">{{user.lastName}}</td>
                    <td class="text-left py-2 px-4"><a href="mailto:{{user.email}}">{{user.email}}</a></td>
                    <td class="text-left py-2 px-4">
                        <app-modal #modalEditRef type="icon" buttonIcon="edit">
                            <app-user-edit-form 
                                [user]="user" 
                                (toggleModal)="modalEditRef.toggleModal($event)" 
                            ></app-user-edit-form>
                        </app-modal>
                        
                        <app-modal #modalDeleteRef type="icon" buttonIcon="delete">
                            <app-user-delete-form 
                                [user]="user" 
                                (toggleModal)="modalDeleteRef.toggleModal($event)" 
                                (deleteUser)="deleteUser($event)"
                            ></app-user-delete-form>
                        </app-modal>
                    </td>
                </tr>
            }
        </tbody>
    </table>
    <mat-paginator #paginator
                class="demo-paginator"
                (page)="handlePageEvent($event)"
                [length]="total()"
                [pageSize]="limit()"
                [pageIndex]="page() - 1"
                [pageSizeOptions]="limitOptions"
                aria-label="Select page">
    </mat-paginator>
</section>